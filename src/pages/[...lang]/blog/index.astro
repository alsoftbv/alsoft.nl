---
import Card from "@components/Card.astro";
import Header from "@components/Header.astro";
import Underline from "@components/Underline.astro";
import BaseLayout from "@layouts/BaseLayout.astro";
import {
  getLocalizedPosts,
  getTranslationPaths,
  useTranslations,
} from "@locales/utils";

export function getStaticPaths() {
  return getTranslationPaths();
}

const t = useTranslations(Astro.params.lang);

const posts = await getLocalizedPosts(Astro.params.lang);
---

<BaseLayout
  title={t.blog.title}
  description={t.blog.description}
  canonical="https://alsoft.nl/blog"
>
  <Header>{t.blog.header}</Header>
  {
    posts.map((post) => (
      <Card class="card">
        <small>
          {post.data.date
            .toLocaleDateString("en-GB", {
              day: "2-digit",
              month: "2-digit",
              year: "numeric",
            })
            .replace(/\//g, "-")}
        </small>
        <h1>
          <a href={post.slug}>
            <Underline>{post.data.title}</Underline>
          </a>
        </h1>
        <p>{post.data.description}</p>
      </Card>
    ))
  }
</BaseLayout>

<style>
  a {
    text-decoration: none;
  }

  small {
    color: #cfcfcf;
  }

  h1 {
    margin: 0.6rem 0 1rem 0;
  }

  .card {
    max-width: 960px;
    margin: 2rem auto;
  }

  @media (max-width: 960px) {
    .card {
      margin: 1rem 0.5rem;
    }
  }
</style>
